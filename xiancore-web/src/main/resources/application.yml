spring:
  application:
    name: XianCore Web Service

  # ==================== 数据库配置 ====================
  datasource:
    # MySQL配置
    url: jdbc:mysql://localhost:3306/xiancore?serverTimezone=UTC&useSSL=false
    username: root
    password: password
    driver-class-name: com.mysql.cj.jdbc.Driver

    # 或使用SQLite (开发环境)
    # url: jdbc:sqlite:xiancore.db
    # driver-class-name: org.sqlite.JDBC

    # HikariCP连接池配置
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 10000
      idle-timeout: 600000
      max-lifetime: 1800000

  # ==================== Flyway数据库迁移配置 ====================
  flyway:
    enabled: true
    locations: classpath:/db/migration
    baseline-on-migrate: true
    baseline-version: 0
    baseline-description: Initial baseline version

  # ==================== JPA配置 ====================
  jpa:
    hibernate:
      ddl-auto: validate  # 使用Flyway时应设为validate
    show-sql: false
    database-platform: org.hibernate.dialect.MySQL8Dialect
    properties:
      hibernate:
        format_sql: true

  # ==================== Redis配置 ====================
  redis:
    host: localhost
    port: 6379
    password:
    timeout: 10000ms
    jedis:
      pool:
        max-active: 20
        max-idle: 10
        min-idle: 5

# ==================== 服务器配置 ====================
server:
  port: 8080
  servlet:
    context-path: /
  tomcat:
    threads:
      max: 200
      min-spare: 10

# ==================== 日志配置 ====================
logging:
  level:
    root: INFO
    com.xiancore: DEBUG
  file:
    name: logs/xiancore.log
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# ==================== XianCore配置 ====================
xiancore:
  # Web服务配置
  web:
    # 游戏服务器地址 (用于通信)
    game-server-url: http://localhost:25565
    # 允许的来源 (CORS)
    allowed-origins:
      - http://localhost:3000
      - http://localhost:8080

  # 插件配置
  plugin:
    # 插件Web服务URL
    web-service-url: http://localhost:8080
    # 心跳间隔 (毫秒)
    heartbeat-interval: 10000
    # 连接超时 (毫秒)
    connect-timeout: 5000

  # 数据库配置
  database:
    # 查询缓存TTL (秒)
    query-cache-ttl: 60
    # 连接池大小
    pool-size: 20

  # 缓存配置
  cache:
    # 缓存TTL (毫秒)
    ttl: 300000
    # 自动清理间隔 (毫秒)
    cleanup-interval: 60000

  # 优化配置
  optimization:
    # 垃圾回收阈值 (%)
    gc-threshold: 80
    # 内存记录间隔 (毫秒)
    memory-record-interval: 30000
    # 启用性能优化
    enabled: true

  # Vault经济系统
  vault:
    enabled: true
    # 奖励倍数
    multiplier: 1.0
    # 基础奖励
    base-reward: 100.0

  # Discord通知
  discord:
    enabled: false
    # Bot Token (需要从环境变量读取)
    bot-token: ${DISCORD_TOKEN:}
    # WebHook URL (需要从环境变量读取)
    webhook-url: ${DISCORD_WEBHOOK:}

  # PlaceholderAPI
  placeholderapi:
    enabled: true
    # 占位符前缀
    prefix: boss

  # 插件生态系统
  ecosystem:
    # 启用的插件
    enabled-plugins:
      - vault
      - discord
      - placeholderapi
      - litebans
      - essentialsx
      - worldedit
